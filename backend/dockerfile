# Use official Python slim image
FROM python:3.11-slim

# Prevent .pyc files and enable unbuffered stdout
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

# Set working directory
WORKDIR /remindme_backend

# Copy uv environment files
COPY pyproject.toml uv.lock ./

RUN ls -la

# Install dependencies via uv
RUN python3 -m pip install --upgrade pip \
    && pip install uv \
    && uv sync --frozen

# Copy the rest of the application code
COPY . .

# Expose FastAPI port
EXPOSE 8001

# Run FastAPI
ENV PATH="/remindme_backend/.venv/bin:$PATH"

WORKDIR /remindme_backend/app
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8001"]



